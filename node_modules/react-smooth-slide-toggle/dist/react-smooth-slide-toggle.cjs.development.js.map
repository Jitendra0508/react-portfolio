{"version":3,"file":"react-smooth-slide-toggle.cjs.development.js","sources":["../src/SlideToggle/SlideToggle.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react'\r\ninterface Props {\r\n    children: React.ReactNode;\r\n    trigger: React.ReactNode;\r\n    easing?:'easeInCubic'| 'easeOutCubic'|'easeInOutCubic'|'easeInQuart'|'easeOutQuart'|'easeOutQuart'|'easeInOutQuart'|'easeInQuint'|'easeOutQuint'|'easeInOutQuint'|'easeInQuad' | 'easeOutQuad' | 'easeInOutQuad' | 'easeLinear';\r\n    duration?: number;\r\n    expanded?: boolean;\r\n    callBack?: () => void;\r\n   \r\n}\r\nconst defaults = {\r\n    duration: 700,  \r\n    expanded: false,\r\n\r\n}\r\nconst easingFunctions: { [key: string]: (t: number, b: number, c: number, d: number) => number } = {\r\n  easeLinear: (t, b, c, d) => c * t / d + b,\r\n  easeInQuad: (t, b, c, d) => c * (t /= d) * t + b,\r\n  easeOutQuad: (t, b, c, d) => -c * (t /= d) * (t - 2) + b,\r\n  easeInOutQuad: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t + b : -c / 2 * ((--t) * (t - 2) - 1) + b,\r\n  easeInCubic: (t, b, c, d) => c * (t /= d) * t * t + b,\r\n  easeOutCubic: (t, b, c, d) => c * ((t = t / d - 1) * t * t + 1) + b,\r\n  easeInOutCubic: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t + b : c / 2 * ((t -= 2) * t * t + 2) + b,\r\n  easeInQuart: (t, b, c, d) => c * (t /= d) * t * t * t + b,\r\n  easeOutQuart: (t, b, c, d) => -c * ((t = t / d - 1) * t * t * t - 1) + b,\r\n  easeInOutQuart: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t * t + b : -c / 2 * ((t -= 2) * t * t * t - 2) + b,\r\n  easeInQuint: (t, b, c, d) => c * (t /= d) * t * t * t * t + b,\r\n  easeOutQuint: (t, b, c, d) => c * ((t = t / d - 1) * t * t * t * t + 1) + b,\r\n  easeInOutQuint: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t * t * t + b : c / 2 * ((t -= 2) * t * t * t * t + 2) + b,\r\n};\r\n\r\nconst SlideToggle = ({ ...props }: Props) => {\r\n    const [expanded, setexpanded] = useState<boolean>(props.expanded ? props.expanded : defaults.expanded)\r\n    const duration = props.duration ? props.duration : defaults.duration\r\n    const mainRef = useRef({\r\n        ...defaults, ...props,\r\n        requestRef: 0,\r\n        previousTimeRef: 0,\r\n        height: 0,\r\n        isSliding: false\r\n    })\r\n\r\n    const refElement = useRef<HTMLDivElement>(null);\r\n    const easingFn = easingFunctions[props.easing ? props.easing:'easeLinear']  \r\n    const handleAnimation = useCallback((time: number) => {\r\n        if (!refElement.current) return    \r\n        mainRef.current.requestRef = time - mainRef.current.previousTimeRef;\r\n        const trn = easingFn(mainRef.current.requestRef, 0, mainRef.current.height, duration);    \r\n        if (expanded)\r\n        refElement.current.style.height = `${(mainRef.current.height - trn).toFixed(2)}px`        \r\n        else      \r\n            refElement.current.style.height = `${trn.toFixed(2)}px`        \r\n      \r\n        if (mainRef.current.requestRef < duration) {\r\n            requestAnimationFrame(handleAnimation);\r\n        } else {\r\n            if (expanded)\r\n                refElement.current.style.height = `0px`\r\n            else\r\n                refElement.current.style.height = `auto`\r\n\r\n            mainRef.current.isSliding = false;\r\n            if (props.callBack)\r\n                props.callBack()\r\n            setexpanded(expanded => !expanded);\r\n        }\r\n\r\n    },[expanded])\r\n\r\n    const slideElement = () => {\r\n        if (mainRef.current.isSliding) return\r\n        mainRef.current.isSliding = true\r\n      \r\n        if (expanded) {\r\n            mainRef.current.height = getTotalHeightWithMargins(refElement.current)\r\n       \r\n        }\r\n        else {\r\n            if (!refElement.current)\r\n                return          \r\n            mainRef.current.height = 0;\r\n            Array.from(refElement.current.childNodes || []).forEach((c) => {\r\n                if (c instanceof HTMLElement) {               \r\n                    mainRef.current.height += getTotalHeightWithMargins(c); \r\n                         \r\n                }\r\n            });\r\n\r\n        }\r\n        requestAnimationFrame((time) => {\r\n            mainRef.current.previousTimeRef = time;\r\n            handleAnimation(time);\r\n        });\r\n\r\n    }\r\n    useEffect(() => {     \r\n        \r\n        if (!refElement.current) return\r\n        if (expanded) {\r\n            refElement.current.style.height = `auto`;\r\n            refElement.current.style.overflow = `hidden`;\r\n\r\n        }\r\n        else {\r\n            refElement.current.style.height = `0`;\r\n            refElement.current.style.overflow = `hidden`;\r\n        }\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <div className={expanded?'active slide-toggle':'slide-toggle'}>\r\n            {React.cloneElement(props.trigger as React.ReactElement, { onClick: slideElement })}\r\n            <div ref={refElement}>\r\n                <div className='wrapper' style={{overflow:'auto'}}>\r\n                {props.children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SlideToggle;\r\n\r\nfunction getTotalHeightWithMargins(element: any) {\r\n    const computedStyle = getComputedStyle(element);\r\n    const height = parseFloat(computedStyle.height);\r\n    const marginTop = parseFloat(computedStyle.marginTop);\r\n    const marginBottom = parseFloat(computedStyle.marginBottom);\r\n    return height + marginTop + marginBottom;\r\n}\r\n\r\n"],"names":["defaults","duration","expanded","easingFunctions","easeLinear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","SlideToggle","props","setexpanded","useState","mainRef","useRef","requestRef","previousTimeRef","height","isSliding","refElement","easingFn","easing","handleAnimation","useCallback","time","current","trn","style","toFixed","requestAnimationFrame","callBack","slideElement","getTotalHeightWithMargins","Array","from","childNodes","forEach","HTMLElement","useEffect","overflow","React","className","cloneElement","trigger","onClick","ref","children","element","computedStyle","getComputedStyle","parseFloat","marginTop","marginBottom"],"mappings":"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"}