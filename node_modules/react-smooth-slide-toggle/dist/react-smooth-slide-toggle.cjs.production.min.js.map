{"version":3,"file":"react-smooth-slide-toggle.cjs.production.min.js","sources":["../src/SlideToggle/SlideToggle.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react'\r\ninterface Props {\r\n    children: React.ReactNode;\r\n    trigger: React.ReactNode;\r\n    easing?:'easeInCubic'| 'easeOutCubic'|'easeInOutCubic'|'easeInQuart'|'easeOutQuart'|'easeOutQuart'|'easeInOutQuart'|'easeInQuint'|'easeOutQuint'|'easeInOutQuint'|'easeInQuad' | 'easeOutQuad' | 'easeInOutQuad' | 'easeLinear';\r\n    duration?: number;\r\n    expanded?: boolean;\r\n    callBack?: () => void;\r\n   \r\n}\r\nconst defaults = {\r\n    duration: 700,  \r\n    expanded: false,\r\n\r\n}\r\nconst easingFunctions: { [key: string]: (t: number, b: number, c: number, d: number) => number } = {\r\n  easeLinear: (t, b, c, d) => c * t / d + b,\r\n  easeInQuad: (t, b, c, d) => c * (t /= d) * t + b,\r\n  easeOutQuad: (t, b, c, d) => -c * (t /= d) * (t - 2) + b,\r\n  easeInOutQuad: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t + b : -c / 2 * ((--t) * (t - 2) - 1) + b,\r\n  easeInCubic: (t, b, c, d) => c * (t /= d) * t * t + b,\r\n  easeOutCubic: (t, b, c, d) => c * ((t = t / d - 1) * t * t + 1) + b,\r\n  easeInOutCubic: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t + b : c / 2 * ((t -= 2) * t * t + 2) + b,\r\n  easeInQuart: (t, b, c, d) => c * (t /= d) * t * t * t + b,\r\n  easeOutQuart: (t, b, c, d) => -c * ((t = t / d - 1) * t * t * t - 1) + b,\r\n  easeInOutQuart: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t * t + b : -c / 2 * ((t -= 2) * t * t * t - 2) + b,\r\n  easeInQuint: (t, b, c, d) => c * (t /= d) * t * t * t * t + b,\r\n  easeOutQuint: (t, b, c, d) => c * ((t = t / d - 1) * t * t * t * t + 1) + b,\r\n  easeInOutQuint: (t, b, c, d) => (t /= d / 2) < 1 ? c / 2 * t * t * t * t * t + b : c / 2 * ((t -= 2) * t * t * t * t + 2) + b,\r\n};\r\n\r\nconst SlideToggle = ({ ...props }: Props) => {\r\n    const [expanded, setexpanded] = useState<boolean>(props.expanded ? props.expanded : defaults.expanded)\r\n    const duration = props.duration ? props.duration : defaults.duration\r\n    const mainRef = useRef({\r\n        ...defaults, ...props,\r\n        requestRef: 0,\r\n        previousTimeRef: 0,\r\n        height: 0,\r\n        isSliding: false\r\n    })\r\n\r\n    const refElement = useRef<HTMLDivElement>(null);\r\n    const easingFn = easingFunctions[props.easing ? props.easing:'easeLinear']  \r\n    const handleAnimation = useCallback((time: number) => {\r\n        if (!refElement.current) return    \r\n        mainRef.current.requestRef = time - mainRef.current.previousTimeRef;\r\n        const trn = easingFn(mainRef.current.requestRef, 0, mainRef.current.height, duration);    \r\n        if (expanded)\r\n        refElement.current.style.height = `${(mainRef.current.height - trn).toFixed(2)}px`        \r\n        else      \r\n            refElement.current.style.height = `${trn.toFixed(2)}px`        \r\n      \r\n        if (mainRef.current.requestRef < duration) {\r\n            requestAnimationFrame(handleAnimation);\r\n        } else {\r\n            if (expanded)\r\n                refElement.current.style.height = `0px`\r\n            else\r\n                refElement.current.style.height = `auto`\r\n\r\n            mainRef.current.isSliding = false;\r\n            if (props.callBack)\r\n                props.callBack()\r\n            setexpanded(expanded => !expanded);\r\n        }\r\n\r\n    },[expanded])\r\n\r\n    const slideElement = () => {\r\n        if (mainRef.current.isSliding) return\r\n        mainRef.current.isSliding = true\r\n      \r\n        if (expanded) {\r\n            mainRef.current.height = getTotalHeightWithMargins(refElement.current)\r\n       \r\n        }\r\n        else {\r\n            if (!refElement.current)\r\n                return          \r\n            mainRef.current.height = 0;\r\n            Array.from(refElement.current.childNodes || []).forEach((c) => {\r\n                if (c instanceof HTMLElement) {               \r\n                    mainRef.current.height += getTotalHeightWithMargins(c); \r\n                         \r\n                }\r\n            });\r\n\r\n        }\r\n        requestAnimationFrame((time) => {\r\n            mainRef.current.previousTimeRef = time;\r\n            handleAnimation(time);\r\n        });\r\n\r\n    }\r\n    useEffect(() => {     \r\n        \r\n        if (!refElement.current) return\r\n        if (expanded) {\r\n            refElement.current.style.height = `auto`;\r\n            refElement.current.style.overflow = `hidden`;\r\n\r\n        }\r\n        else {\r\n            refElement.current.style.height = `0`;\r\n            refElement.current.style.overflow = `hidden`;\r\n        }\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <div className={expanded?'active slide-toggle':'slide-toggle'}>\r\n            {React.cloneElement(props.trigger as React.ReactElement, { onClick: slideElement })}\r\n            <div ref={refElement}>\r\n                <div className='wrapper' style={{overflow:'auto'}}>\r\n                {props.children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SlideToggle;\r\n\r\nfunction getTotalHeightWithMargins(element: any) {\r\n    const computedStyle = getComputedStyle(element);\r\n    const height = parseFloat(computedStyle.height);\r\n    const marginTop = parseFloat(computedStyle.marginTop);\r\n    const marginBottom = parseFloat(computedStyle.marginBottom);\r\n    return height + marginTop + marginBottom;\r\n}\r\n\r\n"],"names":["defaults","duration","expanded","easingFunctions","easeLinear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","getTotalHeightWithMargins","element","computedStyle","getComputedStyle","parseFloat","height","marginTop","marginBottom","SlideToggle","props","setexpanded","useState","mainRef","useRef","requestRef","previousTimeRef","isSliding","refElement","easingFn","easing","handleAnimation","useCallback","time","current","trn","style","toFixed","requestAnimationFrame","callBack","useEffect","overflow","React","className","cloneElement","trigger","onClick","slideElement","Array","from","childNodes","forEach","HTMLElement","ref","children"],"mappings":"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"}